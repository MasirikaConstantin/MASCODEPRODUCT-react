import{v as j,j as s,Y as r,m,q as g,r as x,$ as f}from"./app-DHb59tE0.js";import{A as w}from"./AuthenticatedLayout-DDMQsDn7.js";import{P as h}from"./Pagination-CdOLaelK.js";import{V as o}from"./Footer-CDfflSB7.js";import"./Header-LBewob2u.js";import"./TextInput-DejsJakp.js";function u({post:e,type:l}){const{put:c,get:d}=j(),n=()=>{m.put(route("posts.update-status",e.id),{etat:1},{onSuccess:()=>{o.success("Statut mis à jour !")},onError:t=>{}})},i=t=>{window.confirm("Êtes-vous sûr de vouloir supprimer cet post ? Cette action est irréversible.")&&m.delete(`/post/${t.id}`,{preserveScroll:!0,onSuccess:()=>{o.success("Post supprimée avec succès")},onError:()=>{o.error("Une erreur est survenue lors de la suppression")}})};return s.jsx("div",{className:"card bg-base-200 shadow-xl",children:s.jsxs("div",{className:"card-body",children:[s.jsxs("div",{className:"flex justify-between items-start",children:[s.jsxs("h2",{className:"card-title",children:[s.jsx(r,{href:route("posts.show",e.slug),className:"hover:text-primary",children:e.titre}),l==="draft"&&s.jsx("div",{className:"badge badge-warning",children:"Brouillon"})]}),s.jsx("div",{className:"flex items-center space-x-2",children:s.jsx("span",{className:"text-sm text-gray-500",children:e.duration})})]}),s.jsx("p",{className:"line-clamp-2",children:e.contenus}),e.tags.length>0&&s.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:e.tags.map(t=>s.jsx("span",{className:"badge badge-outline",children:t.nom},t.id))}),s.jsxs("div",{className:"card-actions justify-between items-center mt-4",children:[s.jsx("div",{className:"flex items-center space-x-2",children:s.jsxs("span",{className:"text-sm text-gray-500",children:[e.views_count," vue",e.views_count!==1?"s":""]})}),s.jsxs("div",{className:"flex space-x-2",children:[l==="draft"&&s.jsx("button",{onClick:n,className:"btn btn-sm btn-success",children:"Mettre en ligne"}),s.jsx("button",{onClick:()=>i(e),className:"btn btn-error btn-sm",children:"Supprimer"}),s.jsx(r,{href:route("posts.edit",e.slug),className:"btn btn-sm btn-outline",children:"Modifier"}),s.jsx(r,{href:route("posts.show",e.slug),className:"btn btn-sm btn-primary",children:"Voir"})]})]})]})})}function y({astuce:e}){const l=c=>{window.confirm("Êtes-vous sûr de vouloir supprimer cette astuce ? Cette action est irréversible.")&&m.delete(`/astuces/${c.id}`,{preserveScroll:!0,onSuccess:()=>{o.success("Astuce supprimée avec succès")},onError:()=>{o.error("Une erreur est survenue lors de la suppression")}})};return s.jsx("div",{className:"card bg-base-200 shadow-xl",children:s.jsxs("div",{className:"card-body",children:[s.jsxs("h2",{className:"card-title",children:[s.jsx(r,{href:route("astuces.previsualiser",{astuce:e.slug}),className:"hover:text-primary",children:e.titre}),e.etat&&s.jsx("div",{className:"badge badge-warning text-xs",children:"En attente"})]}),s.jsx("div",{className:"prose max-w-none line-clamp-3",dangerouslySetInnerHTML:{__html:e.contenus}}),s.jsxs("div",{className:"card-actions justify-end mt-4",children:[s.jsx(r,{href:route("astuces.edit",e.slug),className:"btn btn-sm btn-outline",children:"Modifier"}),s.jsx("button",{onClick:()=>l(e),className:"btn btn-error btn-sm",children:"Supprimer"}),s.jsx(r,{href:route("astuces.previsualiser",{astuce:e.slug}),className:"btn btn-sm btn-primary",children:"Prévisualiser"})]})]})})}function k({item:e}){const{delete:l}=j(),c=n=>{n.preventDefault(),l(route("bookmarks.destroy",e.bookmark_id))},d=()=>{switch(e.type){case"Post":return route("posts.show",e.slug);case"Astuce":return route("astuces.show",e.slug);default:return"#"}};return s.jsx("div",{className:"card bg-base-200 shadow-xl mb-4",children:s.jsxs("div",{className:"card-body",children:[s.jsxs("h2",{className:"card-title",children:[s.jsx(r,{href:d(),className:"hover:text-primary",children:e.titre}),s.jsx("span",{className:"badge badge-info ml-2",children:e.type})]}),s.jsx("p",{className:"line-clamp-2",children:e.contenu}),s.jsxs("div",{className:"flex justify-between items-center mt-4",children:[s.jsxs("span",{className:"text-sm text-gray-500",children:[e.type==="Post"?"Posté":"Publié"," par ",e.user.name]}),s.jsx("button",{onClick:c,className:"btn btn-sm btn-error",children:"Retirer"})]})]})})}function $(){const{posts:e,drafts:l,astuces:c,savedItems:d,user:n,stats:i}=g().props,[t,p]=x.useState("drafts"),[v,b]=x.useState(!1),N=[{id:"drafts",label:"Brouillons"},{id:"posts",label:"Mes Posts"},{id:"astuces",label:"Mes Astuces"},{id:"saved",label:"Enregistrements"}];return s.jsxs(w,{children:[s.jsx(f,{title:"Dashboard"}),s.jsxs("div",{className:"container mx-auto px-4 py-8 ",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[s.jsx("div",{className:"card bg-base-200 shadow-lg",children:s.jsxs("div",{className:"card-body",children:[s.jsx("h3",{className:"card-title text-primary",children:"Posts"}),s.jsx("p",{className:"text-4xl font-bold",children:i.postsCount})]})}),s.jsx("div",{className:"card bg-base-200 shadow-lg",children:s.jsxs("div",{className:"card-body",children:[s.jsx("h3",{className:"card-title text-secondary",children:"Abonnés"}),s.jsx("p",{className:"text-4xl font-bold",children:i.subscribersCount})]})}),s.jsx("div",{className:"card bg-base-200 shadow-lg",children:s.jsxs("div",{className:"card-body",children:[s.jsx("h3",{className:"card-title text-accent",children:"Vues"}),s.jsx("p",{className:"text-4xl font-bold",children:i.viewsCount})]})})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-8",children:[s.jsx("div",{className:"lg:col-span-1",children:s.jsxs("div",{className:"card bg-base-200 shadow-xl",children:[s.jsx("figure",{className:"px-10 pt-10",children:s.jsx("div",{className:"avatar",children:s.jsx("div",{className:"w-32 h-32 rounded-full ring ring-primary ring-offset-base-100 ring-offset-2 flex items-center justify-center overflow-hidden",children:n.image?s.jsx("img",{src:`${window.location.origin}/storage/${n.image}`,alt:n.name,className:"w-full h-full object-cover"}):s.jsx("div",{className:"w-full h-full flex items-center justify-center bg-gray-100",children:s.jsx("svg",{className:"w-16 h-16 text-gray-500","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{fillRule:"evenodd",d:"M12 20a7.966 7.966 0 0 1-5.002-1.756l.002.001v-.683c0-1.794 1.492-3.25 3.333-3.25h3.334c1.84 0 3.333 1.456 3.333 3.25v.683A7.966 7.966 0 0 1 12 20ZM2 12C2 6.477 6.477 2 12 2s10 4.477 10 10c0 5.5-4.44 9.963-9.932 10h-.138C6.438 21.962 2 17.5 2 12Zm10-5c-1.84 0-3.333 1.455-3.333 3.25S10.159 13.5 12 13.5c1.84 0 3.333-1.455 3.333-3.25S13.841 7 12 7Z",clipRule:"evenodd"})})})})})}),s.jsxs("div",{className:"card-body",children:[s.jsx("h2",{className:"card-title",children:n.name}),s.jsx("p",{className:"text-gray-500",children:n.email}),s.jsxs("div",{className:"stats stats-vertical shadow",children:[s.jsxs("div",{className:"stat",children:[s.jsx("div",{className:"stat-title",children:"Posts"}),s.jsx("div",{className:"stat-value",children:i.postsCount})]}),s.jsxs("div",{className:"stat",children:[s.jsx("div",{className:"stat-title",children:"Abonnés"}),s.jsx("div",{className:"stat-value",children:i.subscribersCount})]})]}),s.jsxs("div",{className:"card-actions justify-center mt-4",children:[s.jsx(r,{href:route("mon.profile.edit"),className:"btn btn-primary",children:"Modifier le profil"}),s.jsxs("div",{className:"dropdown dropdown-top",children:[s.jsx("div",{tabIndex:0,role:"button",className:"btn btn-secondary",children:"Créer"}),s.jsxs("ul",{tabIndex:0,className:"dropdown-content z-[1] menu p-2 shadow bg-base-100 rounded-box w-52",children:[s.jsx("li",{children:s.jsx(r,{href:route("astuces.create"),children:"Astuce"})}),s.jsx("li",{children:s.jsx(r,{href:route("posts.newpost"),children:"Post"})})]})]})]})]})]})}),s.jsxs("div",{className:"lg:col-span-3",children:[s.jsx("div",{className:"tabs tabs-boxed bg-base-200 mb-6 rounded-lg",children:N.map(a=>s.jsx("button",{className:`tab ${t===a.id?"tab-active":""}`,onClick:()=>p(a.id),children:a.label},a.id))}),s.jsxs("div",{className:"space-y-6",children:[t==="drafts"&&s.jsx("div",{children:l.data.length>0?s.jsxs("div",{className:"space-y-4 ",children:[l.data.map(a=>s.jsx(u,{post:a,type:"draft"},a.id)),s.jsx(h,{links:l.links})]}):s.jsx("div",{className:"alert alert-info shadow-lg",children:s.jsxs("div",{children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"stroke-current flex-shrink-0 h-6 w-6",fill:"none",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),s.jsx("span",{children:"Aucun brouillon pour le moment"})]})})}),t==="posts"&&s.jsx("div",{children:e.data.length>0?s.jsxs("div",{className:"space-y-4",children:[e.data.map(a=>s.jsx(u,{post:a,type:"post"},a.id)),s.jsx(h,{links:e.links})]}):s.jsx("div",{className:"alert alert-info shadow-lg",children:s.jsxs("div",{children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"stroke-current flex-shrink-0 h-6 w-6",fill:"none",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),s.jsx("span",{children:"Aucun post publié pour le moment"})]})})}),t==="astuces"&&s.jsx("div",{children:c.data.length>0?s.jsxs("div",{className:"space-y-4",children:[c.data.map(a=>s.jsx(y,{astuce:a},a.id)),s.jsx(h,{links:c.links})]}):s.jsx("div",{className:"alert alert-info shadow-lg",children:s.jsxs("div",{children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"stroke-current flex-shrink-0 h-6 w-6",fill:"none",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),s.jsx("span",{children:"Aucune astuce pour le moment"})]})})}),t==="saved"&&s.jsx("div",{children:d.length===0?s.jsx("div",{className:"alert alert-info shadow-lg",children:s.jsxs("div",{children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"stroke-current flex-shrink-0 h-6 w-6",fill:"none",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),s.jsx("span",{children:"Aucun post enregistré pour le moment"})]})}):s.jsx("div",{className:"grid gap-4",children:d.map(a=>s.jsx(k,{item:a},`${a.type}-${a.id}`))})})]})]})]})]}),v&&s.jsx("div",{className:"modal modal-open",children:s.jsxs("div",{className:"modal-box",children:[s.jsx("h3",{className:"font-bold text-lg",children:"Créer un nouveau contenu"}),s.jsx("p",{className:"py-4",children:"Choisissez le type de contenu à créer :"}),s.jsxs("div",{className:"modal-action",children:[s.jsx(r,{href:route("astuces.create"),className:"btn btn-primary",children:"Astuce"}),s.jsx(r,{href:route("user.newpost"),className:"btn btn-secondary",children:"Post"}),s.jsx("button",{className:"btn",onClick:()=>b(!1),children:"Annuler"})]})]})})]})}export{$ as default};
