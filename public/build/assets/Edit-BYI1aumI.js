import{q as w,r as x,v as N,j as e,$ as k}from"./app-Z73br59e.js";import{I as d,T as m,a as u}from"./TextInput-Cu543-Y_.js";import L from"./DeleteUserForm-BpEq6Cry.js";import{V as M}from"./Footer-DOtImJgn.js";import{A as S}from"./AuthenticatedLayout-CyBF8I8h.js";import"./SecondaryButton-DP1v2OgG.js";import"./portal-43DQQZS2.js";import"./use-server-handoff-complete-DW12abzb.js";import"./transition-ZU7_aIIb.js";import"./Header-BK5-O9Nw.js";const P=()=>{const{user:p}=w().props,[a,l]=x.useState(!1),[r,n]=x.useState(null),i=x.useRef(null),{data:h,setData:t,post:o,errors:j,processing:c,recentlySuccessful:g,reset:s}=N({image:null}),y=f=>{const v=f.target.files[0];if(v){t("image",v);const b=new FileReader;b.onload=()=>n(b.result),b.readAsDataURL(v)}},C=f=>{f.preventDefault(),o(route("mon.profile.avatar.update"),{preserveScroll:!0,onSuccess:()=>{l(!1),n(null),s("image")}})};return e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>l(!0),className:"btn btn-outline btn-sm",children:"Changer la photo"}),e.jsxs("dialog",{open:a,className:"modal",children:[e.jsxs("div",{className:"modal-box",children:[e.jsx("h3",{className:"font-bold text-lg mb-4",children:"Modifier la photo de profil"}),r?e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx("img",{src:r,alt:"Preview",className:"max-w-xs rounded-lg"})}):e.jsx("div",{className:"flex justify-center items-center bg-gray-100 rounded-lg mb-4",style:{height:"200px"},children:e.jsx("p",{className:"text-gray-500",children:"Aucune image sélectionnée"})}),e.jsx("input",{type:"file",ref:i,onChange:y,accept:"image/*",className:"hidden"}),e.jsxs("div",{className:"flex justify-between mb-4",children:[e.jsx("button",{onClick:()=>i.current.click(),className:"btn btn-outline",children:r?"Changer":"Sélectionner"}),r&&e.jsx("button",{onClick:()=>{t("image",null),n(null)},className:"btn btn-ghost",children:"Supprimer"})]}),j.image&&e.jsxs("div",{className:"alert alert-error mb-4",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"stroke-current shrink-0 h-6 w-6",fill:"none",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsx("span",{children:j.image})]}),g&&e.jsxs("div",{className:"alert alert-success mb-4",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"stroke-current shrink-0 h-6 w-6",fill:"none",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsx("span",{children:"Photo mise à jour avec succès!"})]}),e.jsxs("div",{className:"modal-action",children:[e.jsx("button",{onClick:()=>{l(!1),t("image",null),n(null),s()},className:"btn btn-ghost",children:"Annuler"}),e.jsx("button",{onClick:C,className:"btn btn-primary",disabled:!h.image||c,children:c?e.jsx("span",{className:"loading loading-spinner"}):"Enregistrer"})]})]}),e.jsx("form",{method:"dialog",className:"modal-backdrop",children:e.jsx("button",{onClick:()=>l(!1),children:"close"})})]})]})};function E(){const{auth:p}=w().props,a=p.user,[l,r]=x.useState(!1),{data:n,setData:i,patch:h,errors:t,processing:o,recentlySuccessful:j,reset:c}=N({name:a.name,email:a.email,password:"",password_confirmation:""}),g=s=>{s.preventDefault(),h(route("mon.profile.update"),{preserveScroll:!0,onSuccess:()=>{M.success("Profil mis à jour avec succès !"),r(!1),c("password","password_confirmation")}})};return e.jsxs("div",{className:"max-w-3xl mx-auto py-8 px-4",children:[e.jsx(k,{title:"Mon Profil"}),e.jsx("div",{className:"card bg-base-200 shadow-xl",children:e.jsxs("div",{className:"card-body",children:[e.jsxs("div",{className:"flex justify-between items-start mb-6",children:[e.jsx("h1",{className:"card-title text-2xl",children:"Mon Profil"}),l?e.jsx("button",{onClick:()=>r(!1),className:"btn btn-ghost btn-sm",children:"Annuler"}):e.jsxs("button",{onClick:()=>r(!0),className:"btn btn-primary btn-sm",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),"Modifier"]})]}),e.jsxs("div",{className:"flex flex-col md:flex-row gap-6",children:[e.jsxs("div",{className:"flex-shrink-0 flex flex-col items-center",children:[e.jsx("div",{className:"avatar mb-4",children:e.jsx("div",{className:"w-32 rounded-full ring ring-primary ring-offset-base-100 ring-offset-2",children:a.image?e.jsx("img",{src:`${window.location.origin}/public/${a.image}`,alt:"Photo de profil",onError:s=>{s.target.onerror=null,s.target.src=`https://ui-avatars.com/api/?name=${a.name}&background=random`}}):e.jsx("img",{src:`https://ui-avatars.com/api/?name=${a.name}&background=random`,alt:"Photo par défaut"})})}),l&&e.jsx(P,{})]}),e.jsx("div",{className:"flex-grow",children:l?e.jsxs("form",{onSubmit:g,className:"space-y-4",children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:e.jsxs("div",{children:[e.jsx(d,{htmlFor:"name",value:"Nom complet"}),e.jsx(m,{id:"name",name:"name",value:n.name,className:"input input-bordered w-full mt-1",onChange:s=>i("name",s.target.value),required:!0}),e.jsx(u,{message:t.name,className:"mt-2"})]})}),e.jsxs("div",{children:[e.jsx(d,{htmlFor:"email",value:"Email"}),e.jsx(m,{id:"email",type:"email",name:"email",value:n.email,className:"input input-bordered w-full mt-1",onChange:s=>i("email",s.target.value),required:!0}),e.jsx(u,{message:t.email,className:"mt-2"})]}),e.jsx("div",{className:"divider",children:"Changer le mot de passe"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(d,{htmlFor:"password",value:"Nouveau mot de passe"}),e.jsx(m,{id:"password",type:"password",name:"password",value:n.password,className:"input input-bordered w-full mt-1",onChange:s=>i("password",s.target.value)}),e.jsx(u,{message:t.password,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(d,{htmlFor:"password_confirmation",value:"Confirmation"}),e.jsx(m,{id:"password_confirmation",type:"password",name:"password_confirmation",value:n.password_confirmation,className:"input input-bordered w-full mt-1",onChange:s=>i("password_confirmation",s.target.value)}),e.jsx(u,{message:t.password_confirmation,className:"mt-2"})]})]}),e.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>r(!1),className:"btn btn-ghost",children:"Annuler"}),e.jsx("button",{type:"submit",className:"btn btn-primary",disabled:o,children:o?e.jsx("span",{className:"loading loading-spinner"}):"Enregistrer"})]})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{children:e.jsx("h2",{className:"text-xl font-semibold",children:a.name})}),a.bio&&e.jsx("p",{className:"",children:a.bio}),e.jsx("div",{className:"space-y-2",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),e.jsx("span",{children:a.email})]})}),e.jsx("hr",{}),e.jsx("div",{className:"divider ",children:"Compte"}),e.jsx("div",{className:"bg-base-100 px-2 py-2  rounded-md",children:e.jsx(L,{})})]})})]})]})})]})}function W({mustVerifyEmail:p,status:a}){return e.jsxs(S,{children:[e.jsx(k,{title:"Mon Profile"}),e.jsx(E,{})]})}export{W as default};
