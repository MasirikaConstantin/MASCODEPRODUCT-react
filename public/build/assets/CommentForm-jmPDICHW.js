import{q as l,v as j,j as e}from"./app-DHb59tE0.js";import{V as v}from"./Footer-CDfflSB7.js";function g({postId:i,parentId:r=null,onCancelReply:t=null}){const{auth:m}=l().props,{props:u}=l(),c=u.flash||{},{data:d,setData:x,post:h,processing:s,errors:n,reset:b}=j({contenus:"",post_id:i,parent_id:r}),p=o=>{o.preventDefault(),h(route("commentaires.store"),{preserveScroll:!0,onSuccess:()=>{b("contenus"),v.success("Commentaire envoyé avec succes"),t&&t()},onError:()=>{const a=document.querySelector(".text-error");a&&a.scrollIntoView({behavior:"smooth",block:"center"})}})};return m.user?e.jsxs("div",{className:"mt-8",id:"comment-form",children:[c.success&&e.jsx("div",{className:"alert alert-success mb-4",children:e.jsx("div",{children:e.jsx("span",{children:c.success})})}),e.jsx("h3",{className:"text-xl font-semibold mb-4 text-base-content",children:r?"Répondre au commentaire":"Laisser un commentaire"}),e.jsxs("form",{onSubmit:p,className:"space-y-4",children:[e.jsxs("div",{className:"form-control",children:[e.jsx("textarea",{className:`textarea textarea-bordered h-24 ${n.contenus?"textarea-error":""}`,placeholder:"Votre commentaire...",value:d.contenus,onChange:o=>x("contenus",o.target.value),disabled:s}),n.contenus&&e.jsx("span",{className:"text-error text-sm mt-1 block",children:n.contenus})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{type:"submit",className:`btn btn-primary ${s?"loading":""}`,disabled:s,children:s?"":r?"Publier la réponse":"Publier le commentaire"}),r&&e.jsx("button",{type:"button",className:"btn btn-ghost",onClick:t,disabled:s,children:"Annuler"})]})]})]}):e.jsx("div",{className:"mt-8",children:e.jsx("div",{className:"alert alert-warning",children:e.jsxs("div",{children:[e.jsx("span",{children:"Vous devez être connecté pour commenter"}),e.jsx(Link,{href:route("login"),className:"link link-primary ml-2",children:"Se connecter"})]})})})}export{g as C};
